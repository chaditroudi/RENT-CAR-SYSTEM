<app-breadcrumb
  [title]="'Contracts Page'"
  [items]="['Forms', 'Form Layout']"
  [active_item]="'Contracts Page'"
></app-breadcrumb>
<div class="container-fluid">
  <div class="feature-cars">
    <div class="row">
      <div class="col-md-6 cars-total"></div>

      <div class="col-md-6 text-sm-end">
        <div class="select2-drpdwn-car select-options d-inline-block">
          <select name="select" class="form-control btn-square">
            <option value="opt1">Open contracts only</option>
            <option value="opt2">Closest contract only</option>
            <option value="opt3">All contracts</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 box-col-12">
      <div class="text-center">
        <div class="cardheader socialheader">
          <div class="info market-tabs col-md-12">
            <ul
              id="top-tab"
              role="tablist"
              class="nav nav-tabs border-tab tabs-scoial"
            >
              <li class="nav-item">
                <button
                  class="btn btn-pill btn-light btn-air-light active txt-dark me-1"
                  type="button"
                  disabled
                >
                  Voucher 0
                </button>
              </li>
              <li class="nav-item">
                <button
                  class="btn btn-pill btn-light btn-air-light active txt-dark me-1"
                  type="button"
                  disabled
                >
                  Change car
                </button>
              </li>
              <li class="nav-item">
                <button
                  class="btn btn-pill btn-light btn-air-light active txt-dark me-1"
                  type="button"
                >
                  Deposit back
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="btn btn-pill btn-light btn-air-light active txt-dark me-1"
                  type="button"
                >
                  Rec. Voucher
                </button>
              </li>
              <li class="nav-item">
                <button
                  class="btn btn-pill btn-light btn-air-light active txt-dark me-1"
                  type="button"
                >
                  Pay. Voucher
                </button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 col-xl-12">
      <div class="row">
        <div class="col-sm-12">
          <div class="card" *ngIf="formData.length > 0; else noDataFound">
            <div class="card-header">
             
              <div class="text-end">
                <button (click)="goToAddContract()" class="btn btn-success">
                  {{ buttonAdd }}
                </button>
              </div>
            </div>

            <div class="card-header">
              <div class="text-end">
                <app-search (searchChange)="updateFilteredData($event)"></app-search>
           
                <div class="text-center">
                  <ul class="custom-list">
                    <li><strong>*Search by:</strong> car name, customer fullName</li>

                    </ul>

                 
                </div>
              </div>
            </div>
            <div class="card-body">
              <form [formGroup]="ContractForm" class="theme-form mega-form">
                
                <div *ngIf="filteredData.length > 0; else noDataFound">
                  <div *ngFor="let c of filteredData | paginate: { itemsPerPage: 1, currentPage: currentPage, totalItems: filteredData.length, id: paginationId }">
   
                    <div class="text-start">
                      <a [routerLink]="['/modules/contracts/contract/contract-backups',c._id]" class="router-link-active">Backup</a>
                    </div>
                
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="text-center">
                          <span
                            [ngClass]="{
                              'text-danger': c.status === 'Contract is Open',
                              'text-success': c.status === 'Contract is Closed'
                            }"
                            >{{ mycb.checked ? status : c.status }}
                          </span>
                        </h5>
                      </div>
                      <div class="col-md-12">
                        <ul class="action">
                          <ng-container>
                            <li class="edit">
                              <a (click)="openEditContractModal()"
                                ><i class="icon-pencil-alt"></i
                              ></a>
                              <confirmation-modal
                                #editContractModal
                                (newConfirmationEvent)="
                                  editContractAlert($event, c._id)
                                "
                                modalStyle="modal-style-info"
                                modalTitle="Edit contract"
                                [modalBody]="
                                  !noEditAlertModal
                                    ? 'you have payments available are you sure to update ?'
                                    : 'are you sure to edit contract?'
                                "
                                modalButtonColor="btn btn-info"
                              ></confirmation-modal>
                            </li>
                          </ng-container>

                          <li class="delete">
                            <a (click)="open()"
                              ><i class="icon-trash mb-3"></i>

                              <confirmation-modal
                                #confirmationModal
                                (newConfirmationEvent)="
                                  getConfirmationValue($event, c._id)
                                "
                                modalStyle="modal-style-info"
                                modalTitle="Delete contract"
                                modalBody="are you sure to delete contract?"
                                modalButtonColor="btn btn-danger"
                              ></confirmation-modal>
                            </a>
                          </li>
                          <li class="pdf" *ngIf="show_pdf">
                            <a
                              routerlink="/cars/car-details"
                              (click)="goToInvoice(c._id)"
                              ><i class="icon-printer"></i
                            ></a>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="row g-4">
                      <div class="col-md-3">
                        <div class="mb-3">
                          <label class="col-form-label">No</label>
                          <input
                            class="form-control"
                            type="text"
                            disabled="true"
                            placeholder="No"
                            (input)="onChangeInputValue($event, 0)"
                            [value]="c.serial"
                          />
                        </div>
                      </div>

                      <div class="col-md-3">
                        <div class="mb-3">
                          <label class="col-form-label">Version</label>
                          <input
                            class="form-control"
                            type="text"
                            disabled="true"
                            placeholder="Version"
                            (input)="onChangeInputValue($event, 1)"
                            [value]="c.version"
                          />
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label class="col-form-label">Sponsor/Driver</label>
                          <input
                            class="form-control"
                            type="text"
                            placeholder="Sponsor"
                            (input)="onChangeInputValue($event, 2)"
                            [value]="c.sponsor"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="row g-6">
                      <div class="col-md-3">
                        <div class="mb-3">
                          <label class="col-form-label">Car out</label>
                          <input
                            class="form-control"
                            formControlName="car_out"
                            type="datetime-local"
                            (input)="onChangeInputValue($event, 3)"
                            [ngModel]="c.car_out | date : 'yyyy-MM-dd HH:mm'"
                          />
                        </div>
                      </div>

                      <div class="col-md-3">
                        <div class="mb-3">
                          <label class="col-form-label">Days</label>
                          <input
                            class="form-control"
                            formControlName="days"
                            type="number"
                            (input)="onChangeInputValue($event, 4)"
                            [ngModel]="c.days"
                          />
                        </div>
                      </div>

                      <div class="col-md-4">
                        <div class="mb-3">
                          <label class="col-form-label">Car back</label>
                          <input
                            class="form-control"
                            type="datetime-local"
                            (input)="onChangeInputValue($event, 5)"
                            [ngModel]="c.car_back | date : 'yyyy-MM-ddTHH:mm'"
                            formControlName="car_back"
                            [ngClass]="{
                              disabled: isDisabled
                            }"
                          />
                        </div>
                      </div>
                      <div class="col-md-2">
                        <div class="mb-3">
                          <label class="col-form-label"></label>
                          <div
                            class="form-check checkbox checkbox-solid-primary"
                          >
                            Status Contract
                            <input
                              class="form-check-input"
                              id="solid3"
                              type="checkbox"
                              #mycb
                              (click)="onCarBackEvent(mycb.checked)"
                            />
                            <label
                              class="form-check-label"
                              for="solid3"
                            ></label>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row g-4">
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label class="col-form-label">Car name</label>
                          <div class="d-flex">
                            <input
                              class="form-control"
                              type="text"
                              placeholder="Car "
                              [value]="
                                selectedCarData && selectedCarData
                                  ? selectedCarData
                                  : c.car?.car +
                                    '-' +
                                    c.car?.plate +
                                    '-' +
                                    c.car?.year
                              "
                              (input)="onChangeInputValue($event, 6)"
                            />
                            <button
                              class="btn btn-outline-primary btn-xs"
                              (click)="openCarModal()"
                            >
                              Choose
                            </button>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-4">
                        <div class="mb-3">
                          <label class="col-form-label">Location</label>
                          <input
                            ngx-google-places-autocomplete
                            type="text"
                            class="form-control"
                            [value]="c.location"
                            placeholder="add location"
                            (onAddressChange)="AddressChange($event)"
                          />
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label class="col-form-label">Hirer</label>
                          <div class="d-flex">
                            <input
                              class="form-control"
                              type="text"
                              placeholder="Hirer"
                              (input)="onChangeInputValue($event, 10)"
                              [value]="
                                selectedCustomerData && selectedCustomerData
                                  ? selectedCustomerData
                                  : c.owner?.fullName +
                                    '-' +
                                    c.owner?.mobile +
                                    '-' +
                                    c.car?.year
                              "
                            />
                            <button
                              class="btn btn-outline-primary btn-xs"
                              (click)="openCustomerModal()"
                            >
                              Choose
                            </button>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-12">
                        <div class="mb-3">
                          <label class="col-form-label">Comments </label>
                          <textarea
                            class="comments form-control"
                            type="text"
                            (input)="onChangeInputValue($event, 11)"
                            [value]="c.comments"
                            placeholder="No"
                          ></textarea>
                        </div>
                      </div>
                    </div>
                    <div class="mb-3 m-t-15 custom-radio-ml p-2">
                      <div class="form-check radio radio-primary">
                        <div class="d-flex">
                          <div class="col-sm-2">
                            <input
                              class="form-check-input"
                              id="radio22"
                              type="radio"
                              name="radio1"
                              [checked]="c.status_contract === 'daily'"
                              value="daily"
                              (input)="
                                onChangeRadioValue(
                                  $event,
                                  c.days,
                                  daily && daily ? daily : c.car?.daily
                                )
                              "
                            />
                            <label class="form-check-label" for="radio22"
                              >Daily</label
                            >
                          </div>
                          <div class="col-md-3">
                            <input
                              type="number"
                              class="form-control"
                              [value]="daily && daily ? daily : c.car?.daily"
                              (input)="onChangeInputValue($event, 12)"
                              [disabled]="c.daily !== ''"
                              [ngClass]="{
                                'fw-bold': c.status_contract == 'daily'
                              }"
                            />
                          </div>
                        </div>
                      </div>
                      <div class="form-check radio radio-primary">
                        <div class="d-flex">
                          <div class="col-sm-2">
                            <input
                              class="form-check-input"
                              id="radio22"
                              type="radio"
                              name="radio1"
                              [checked]="c.status_contract === 'weekly'"
                              (input)="
                                onChangeRadioValue(
                                  $event,
                                  c.days,
                                  weekly && weekly ? weekly : c.car?.weekly
                                )
                              "
                              value="weekly"
                            />
                            <label class="form-check-label" for="radio22"
                              >Weekly</label
                            >
                          </div>
                          <div class="col-md-3">
                            <input
                              type="number"
                              class="form-control"
                              [value]="
                                weekly && weekly ? weekly : c.car?.weekly
                              "
                              (input)="onChangeInputValue($event, 13)"
                              [disabled]="c.weekly !== ''"
                              [ngClass]="{
                                'fw-bold': c.status_contract == 'weekly'
                              }"
                            />
                          </div>
                        </div>
                      </div>
                      <div class="form-check radio radio-primary">
                        <div class="d-flex">
                          <div class="col-sm-2">
                            <input
                              class="form-check-input"
                              id="radio22"
                              type="radio"
                              name="radio1"
                              value="monthly"
                              [checked]="c.status_contract === 'monthly'"
                              (input)="
                                onChangeRadioValue(
                                  $event,
                                  c.days,
                                  monthly && monthly ? monthly : c.car?.monthly
                                )
                              "
                            />
                            <label class="form-check-label" for="radio22"
                              >Monthly</label
                            >
                          </div>
                          <div class="col-md-3">
                            <input
                              type="number"
                              class="form-control"
                              [value]="
                                monthly && monthly ? monthly : c.car?.monthly
                              "
                              (input)="onChangeInputValue($event, 14)"
                              [disabled]="c.monthly !== ''"
                              [ngClass]="{
                                'fw-bold': c.status_contract == 'monthly'
                              }"
                            />
                          </div>
                        </div>
                      </div>
                      <div class="form-check radio radio-primary">
                        <div class="d-flex">
                          <div class="col-sm-2">
                            <input
                              class="form-check-input"
                              id="radio22"
                              type="radio"
                              name="radio1"
                              value="annual"
                              [checked]="c.status_contract === 'annual'"
                              (input)="
                                onChangeRadioValue(
                                  $event,
                                  c.days,
                                  annual && annual ? annual : c.car?.annual
                                )
                              "
                            />
                            <label class="form-check-label" for="radio22"
                              >Annual</label
                            >
                          </div>
                          <div class="col-md-3">
                            <input
                              type="number"
                              class="form-control"
                              [value]="
                                annual && annual ? annual : c.car?.annual
                              "
                              (input)="onChangeInputValue($event, 15)"
                              [disabled]="c.annual !== ''"
                              [ngClass]="{
                                'fw-bold': c.status_contract == 'annual'
                              }"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-sm-12 col-xl-12">
                        <ul
                          ngbNav
                          #nav="ngbNav"
                          [(activeId)]="active3"
                          (navChange)="onNavChange1($event)"
                          class="nav-tabs"
                        >
                          <li [ngbNavItem]="1">
                            <a ngbNavLink>Car parts</a>
                            <ng-template ngbNavContent>
                              <div class="row">
                                <div class="col-md-12">
                                  <h5 class="mb-3 pt-4">Out</h5>

                                  <div class="animate-chk">
                                    <div class="row">
                                      <div class="col-md-6">
                                        <div class="mb-3 pt-2">
                                          <input
                                            class="form-control"
                                            type="text"
                                            placeholder="Fuel out"
                                            [value]="c.fuel_out"
                                            (input)="
                                              onChangeInputValue($event, 16)
                                            "
                                          />
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <div class="mb-3 pt-2">
                                          <input
                                            class="form-control"
                                            type="text"
                                            placeholder="No KM out"
                                            [value]="c.no_km_out"
                                            (input)="
                                              onChangeInputValue($event, 17)
                                            "
                                          />
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col">
                                        <app-multi-select-dropdown
                                          [list]="selectedItems"
                                          [currentData]="currentData"
                                          (shareCheckedList)="
                                            shareCheckedList($event)
                                          "
                                          (shareIndividualCheckedList)="
                                            shareIndividualCheckedList($event)
                                          "
                                        >
                                        </app-multi-select-dropdown>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <hr class="mt-4 mb-4" />

                              <div class="row">
                                <div class="col-md-12">
                                  <h5 class="mb-3 pt-4">Back</h5>
                                  <div class="animate-chk">
                                    <div class="row">
                                      <div class="col-md-6">
                                        <div class="mb-3 pt-2">
                                          <input
                                            class="form-control"
                                            type="text"
                                            placeholder="Fuel back"
                                            [value]="c.fuel_back"
                                            (input)="
                                              onChangeInputValue($event, 18)
                                            "
                                          />
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <div class="mb-3 pt-2">
                                          <input
                                            class="form-control"
                                            type="text"
                                            placeholder="No KM back"
                                            [value]="c.no_km_back"
                                            (input)="
                                              onChangeInputValue($event, 19)
                                            "
                                          />
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col">
                                        <app-multi-select-dropdown
                                          [list]="selectedItemsBackCar"
                                          [currentData]="currentData1"
                                          (shareCheckedList)="
                                            shareCheckedListBack($event)
                                          "
                                          (shareIndividualCheckedList)="
                                            shareIndividualCheckedList($event)
                                          "
                                        >
                                        </app-multi-select-dropdown>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </ng-template>
                          </li>
                          <li [ngbNavItem]="2">
                            <a ngbNavLink>Payments</a>
                            <ng-template ngbNavContent>
                              <div class="container">
                                <div class="card">
                                  <div class="card-body">
                                    <div class="row">
                                      <div class="col-md-12">
                                        <div class="row g-4">
                                          <div class="col-md-6">
                                            <div class="mb-3">
                                              <div class="d-flex">
                                                <input
                                                  type="text"
                                                  class="form-control border border-3 border-black"
                                                  formControlName="daily_val1"
                                                  [ngModel]="
                                                  daily_val1 ?daily_val1:c.daily_val1
                                                   
                                                "
                                                  (input)="
                                                    onChangeInputValue(
                                                      $event,
                                                      21
                                                    )
                                                  "
                                                  disabled
                                                /><strong
                                                  style="color: black"
                                                  class="ps-1 pt-3 pe-1"
                                                  >X</strong
                                                ><input
                                                  class="form-control border border-3 border-black"
                                                  type="text"
                                                  [ngModel]="daily_val2 ? daily_val2: c.daily_val2"
                                                  (input)="
                                                    calculateResult($event)
                                                  "
                                                  formControlName="daily_val2"
                                                />
                                                <strong
                                                  style="color: black"
                                                  class="ps-1 pt-3 pe-1"
                                                  >=</strong
                                                >
                                                <input
                                                  type="text"
                                                  class="form-control border border-3 border-black"
                                                  formControlName="daily_result"
                                                  [ngModel]="
                                                  daily_result ? daily_result :c.daily_result"
                                                   
                                                  (input)="
                                                    onChangeInputValue(
                                                      $event,
                                                      23
                                                    )
                                                  "
                                                />
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <div
                                          class="row row-cols-sm-3 theme-form mt-3 form-bottom align-items-center g-2 ng-untouched ng-pristine ng-valid"
                                        >
                                          <div class="col-md-3 d-flex">
                                            <div class="mb-3"></div>
                                            <input
                                              type="number"
                                              placeholder="Overtime"
                                              class="form-control"
                                            />
                                          </div>

                                          <div class="d-flex">
                                            <button class="btn btn-primary">
                                              Set
                                            </button>
                                          </div>
                                        </div>

                                        <div
                                          class="row row-cols-sm-3 theme-form mt-3 form-bottom align-items-center g-2 ng-untouched ng-pristine ng-valid"
                                        >
                                          <div class="col-md-3 d-flex">
                                            <input
                                              type="number"
                                              placeholder="Driver / Petrol"
                                              class="form-control"
                                            />
                                          </div>

                                          <div class="d-flex">
                                            <button class="btn btn-primary">
                                              Calc
                                            </button>
                                          </div>
                                        </div>
                                        <div
                                          class="row row-cols-sm-3 theme-form mt-3 form-bottom align-items-center g-2 ng-untouched ng-pristine ng-valid"
                                        >
                                          <div class="col-md-3 d-flex">
                                            <input
                                              type="number"
                                              placeholder="Fines"
                                              class="form-control"
                                            />
                                          </div>

                                          <div class="d-flex">
                                            <button class="btn btn-primary">
                                              Show
                                            </button>
                                          </div>
                                        </div>
                                        <div
                                          class="row row-cols-sm-3 theme-form mt-3 form-bottom align-items-center g-2 ng-untouched ng-pristine ng-valid"
                                        >
                                          <div class="col-md-3 d-flex">
                                            <input
                                              type="number"
                                              placeholder="Overdrive / Other"
                                              class="form-control"
                                            />
                                          </div>

                                          <div class="d-flex">
                                            <button class="btn btn-primary">
                                              Set
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>

                                    <div class="row">
                                      <div class="table-responsive">
                                        <table class="table d-none d-md-table">
                                          <thead>
                                            <tr>
                                              <th scope="col">Advance</th>
                                              <th scope="col">Discount</th>
                                              <th scope="col">Sum</th>
                                              <th scope="col">Payable</th>
                                              <th scope="col">Calculate</th>
                                            </tr>
                                          </thead>
                                          <tbody>
                                            <tr>
                                              <td>
                                                <div class="form-group">
                                                  <input
                                                    #advance
                                                    type="text"
                                                    class="form-control"
                                                    [ngModal]="
                                                      advance
                                                        ? advance
                                                        : c.advance
                                                    "
                                                    (chnage)="
                                                      onChangeInputValue(
                                                        $event,
                                                        26
                                                      )
                                                    "
                                                  />
                                                </div>
                                              </td>

                                              <td>
                                                <div class="form-group">
                                                  <input
                                                    #discount
                                                    type="text"
                                                    class="form-control"
                                                    [ngModal]="
                                                      discount
                                                        ? discount
                                                        : c.discount
                                                    "
                                                    (input)="
                                                      onChangeInputValue(
                                                        $event,
                                                        25
                                                      )
                                                    "
                                                  />
                                                </div>
                                              </td>
                                              <td>
                                                <div class="form-group">
                                                  <input
                                                    #sum
                                                    type="text"
                                                    class="form-control"
                                                    [value]="
                                                          daily_result ? daily_result : c.daily_result
                                                    "
                                                    (input)="
                                                      onChangeInputValue(
                                                        $event,
                                                        24
                                                      )
                                                    "
                                                  />
                                                </div>
                                              </td>
                                              <td>
                                                <div class="form-group">
                                                  <input
                                                    #payable
                                                    type="text"
                                                    class="form-control"
                                                    [ngModal]="
                                                      payable
                                                        ? payable
                                                        : c.payable
                                                    "
                                                    (input)="
                                                      onChangeInputValue(
                                                        $event,
                                                        27
                                                      )
                                                    "
                                                  />
                                                </div>
                                              </td>
                                              <td>
                                                <button
                                                  type="button"
                                                  class="btn btn-light"
                                                  (click)="calculate()"
                                                >
                                                  Calculate
                                                </button>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>

                                        <div class="row">
                                          <div class="col">
                                            <div class="d-md-none">
                                              <form class="mega-form">
                                                <div class="form-group">
                                                  <div class="col-md-6">
                                                    <div class="mb-3">
                                                      <label
                                                        class="col-form-label"
                                                        >Advance</label
                                                      >

                                                      <input
                                                        #advance
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModal)]="
                                                          advance
                                                            ? advance
                                                            : c.advance
                                                        "
                                                        (chnage)="
                                                          onChangeInputValue(
                                                            $event,
                                                            26
                                                          )
                                                        "
                                                      />
                                                    </div>
                                                  </div>
                                                </div>

                                                <div class="form-group">
                                                  <div class="col-md-6">
                                                    <div class="mb-3">
                                                      <label
                                                        class="col-form-label"
                                                        >Discount</label
                                                      >

                                                      <input
                                                        #discount
                                                        type="text"
                                                        class="form-control"
                                                        [ngModal]="
                                                          discount
                                                            ? discount
                                                            : c.discount
                                                        "
                                                        (input)="
                                                          onChangeInputValue(
                                                            $event,
                                                            25
                                                          )
                                                        "
                                                      />
                                                    </div>
                                                  </div>
                                                </div>

                                                <div class="form-group">
                                                  <div class="col-md-6">
                                                    <div class="mb-3">
                                                      <label
                                                        class="col-form-label"
                                                        >Result</label
                                                      >

                                                      <input
                                                        #sum
                                                        type="text"
                                                        class="form-control"
                                                        [value]="
                                                          daily_result ? daily_result : c.daily_result
                                                        "
                                                        (input)="
                                                          onChangeInputValue(
                                                            $event,
                                                            24
                                                          )
                                                        "
                                                      />
                                                    </div>
                                                  </div>
                                                </div>

                                                <div class="form-group">
                                                  <div class="col-md-6">
                                                    <div class="mb-3">
                                                      <label
                                                        class="col-form-label"
                                                        >Payable</label
                                                      >

                                                      <input
                                                        #inputpayable
                                                        type="text"
                                                        class="form-control"
                                                        [ngModal]="
                                                          payable
                                                            ? payable
                                                            : c.payable
                                                        "
                                                        (input)="
                                                          onChangeInputValue(
                                                            $event,
                                                            27
                                                          )
                                                        "
                                                      />
                                                    </div>
                                                  </div>
                                                </div>
                                              </form>
                                              <button
                                                type="button"
                                                class="btn btn-light"
                                                (click)="calculate()"
                                              >
                                                Calculate
                                              </button>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="container">
                                        <div class="row">
                                          <div class="col-md-12">
                                            <div class="mb-3">
                                              <div
                                                class="card-no-border p-8 mt-4"
                                              >
                                                <ng-container
                                                  *ngIf="
                                                    +c.payable === 0 &&
                                                    c.payable != null
                                                  "
                                                >
                                                  <div
                                                    role="alert"
                                                    class="alert alert-success show fade"
                                                  >
                                                    Contract is Paid
                                                  </div>
                                                </ng-container>

                                                <ng-container>
                                                  <div class="card-header">
                                                    <h5>Current payments :</h5>
                                                  </div>
                                                  <div class="car_body">
                                                    <div
                                                      class="mb-3 p-4 m-t-15"
                                                    >
                                                      <!-- <p>
                                                        discount:{{
                                                          c.discount
                                                        }}
                                                      </p>
                                                      <p>
                                                        advance:{{ c.advance }}
                                                      </p>
                                                      <p>
                                                        payable:{{ c.payable }}
                                                      </p>
                                                      <p>sum:{{ c.sum }}</p> -->
                                                      <ol
                                                        class="list-group list-group-light list-group-numbered"
                                                      >
                                                        <li
                                                          class="list-group-item d-flex justify-content-between align-items-start"
                                                        >
                                                          <div
                                                            class="ms-2 me-auto"
                                                          >
                                                            <div
                                                              class="fw-bold"
                                                            >
                                                              Advance
                                                            </div>
                                                          </div>
                                                          <span
                                                            class="badge badge-danger rounded-pill"
                                                            >{{
                                                              c.advance
                                                            }}</span
                                                          >
                                                        </li>
                                                        <li
                                                          class="list-group-item d-flex justify-content-between align-items-start"
                                                        >
                                                          <div
                                                            class="ms-2 me-auto"
                                                          >
                                                            <div
                                                              class="fw-bold"
                                                            >
                                                              Rental period
                                                            </div>
                                                          </div>
                                                          <span
                                                            class="badge badge-danger rounded-pill"
                                                          ></span>
                                                        </li>
                                                        <li
                                                          class="list-group-item d-flex justify-content-between align-items-start"
                                                        >
                                                          <div
                                                            class="ms-2 me-auto"
                                                          >
                                                            <div
                                                              class="fw-bold"
                                                            >
                                                              Discount
                                                            </div>
                                                          </div>
                                                          <span
                                                            class="badge badge-primary rounded-pill"
                                                            >{{
                                                              c.discount
                                                            }}</span
                                                          >
                                                        </li>
                                                        <li
                                                          class="list-group-item d-flex justify-content-between align-items-start"
                                                        >
                                                          <div
                                                            class="ms-2 me-auto"
                                                          >
                                                            <div
                                                              class="fw-bold"
                                                            >
                                                              Sum
                                                            </div>
                                                          </div>
                                                          <span
                                                            class="badge badge-primary rounded-pill"
                                                            >{{ c.sum }}</span
                                                          >
                                                        </li>
                                                        <li
                                                          class="list-group-item d-flex justify-content-between align-items-start"
                                                        >
                                                          <div
                                                            class="ms-2 me-auto"
                                                          >
                                                            <div
                                                              class="fw-bold"
                                                            >
                                                              Payable
                                                            </div>
                                                          </div>
                                                          <span
                                                            class="badge badge-primary rounded-pill"
                                                            >{{
                                                              c.payable
                                                            }}</span
                                                          >
                                                        </li>
                                                      </ol>
                                                    </div>
                                                  </div>
                                                </ng-container>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </ng-template>
                          </li>
                          <li [ngbNavItem]="3">
                            <a ngbNavLink>Car body</a>
                            <ng-template ngbNavContent>

                              <div class="form-group mt-3">
                                <button class="btn btn-primary" (click)="openModalD(c._id)">Open Drawing Modal</button>
                              </div>
                            </ng-template>
                          </li>
                        </ul>
                        <div [ngbNavOutlet]="nav" class="mt-2"></div>
                      </div>
                    </div>
                  </div>
                  <div class="card-footer text-end">
                    <nav>
                      <div class="row">
                        <div class="m-t-15 btn-showcase">
                          <ul>
                            <li>
                              <pagination-controls
                                class="custom-pagination"
                                (pageChange)="p = $event"
                                (pageChange)="pageChanged($event, p)"
                                (pageBoundsCorrection)="pageChanged($event)"
                                maxSize="5"
                                directionLinks="true"
                                autoHide="true"
                                responsive="true"
                                previousLabel="Previous"
                                nextLabel="Next"
                                screenReaderPaginationLabel="Pagination"
                                screenReaderPageLabel="page"
                                screenReaderCurrentLabel="You're on page"
                              >
                              </pagination-controls>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </nav>
                  </div>
                </div>
             
            </form>
            
          </div>
          
        </div>
        <ng-template #noDataFound>
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-body">
                  <span>No contract added yet .</span>
                    <a style="color: #fff;" [routerLink]="['/modules/contracts/contract/contract-add']" routerLinkActive="router-link-active" >
                    <button class="btn btn-primary">
                      Add contract
                  </button>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
